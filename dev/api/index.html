<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · BorrowChecker.jl</title><meta name="title" content="API Reference · BorrowChecker.jl"/><meta property="og:title" content="API Reference · BorrowChecker.jl"/><meta property="twitter:title" content="API Reference · BorrowChecker.jl"/><meta name="description" content="Documentation for BorrowChecker.jl."/><meta property="og:description" content="Documentation for BorrowChecker.jl."/><meta property="twitter:description" content="Documentation for BorrowChecker.jl."/><meta property="og:url" content="https://ai.damtp.cam.ac.uk/borrowcheckerjl/api/"/><meta property="twitter:url" content="https://ai.damtp.cam.ac.uk/borrowcheckerjl/api/"/><link rel="canonical" href="https://ai.damtp.cam.ac.uk/borrowcheckerjl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BorrowChecker.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API Reference</a><ul class="internal"><li><a class="tocitem" href="#Ownership-Macros"><span>Ownership Macros</span></a></li><li><a class="tocitem" href="#References-and-Lifetimes"><span>References and Lifetimes</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Traits"><span>Traits</span></a></li><li><a class="tocitem" href="#Errors"><span>Errors</span></a></li><li><a class="tocitem" href="#Experimental-Features"><span>Experimental Features</span></a></li><li><a class="tocitem" href="#Internals"><span>Internals</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mcranmer/BorrowChecker.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/main/docs/src/api.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><h2 id="Ownership-Macros"><a class="docs-heading-anchor" href="#Ownership-Macros">Ownership Macros</a><a id="Ownership-Macros-1"></a><a class="docs-heading-anchor-permalink" href="#Ownership-Macros" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.MacrosModule.@own" href="#BorrowChecker.MacrosModule.@own"><code>BorrowChecker.MacrosModule.@own</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@own [:mut] x = value
@own [:mut] x, y, z = (value1, value2, value3)
@own [:mut] for var in iter
    # body
end
@own [:mut] x  # equivalent to @own [:mut] x = x
@own [:mut] (x, y)  # equivalent to @own [:mut] (x, y) = (x, y)</code></pre><p>Create a new owned variable. If <code>:mut</code> is specified, the value will be mutable. Otherwise, the value will be immutable.</p><p>You may also use <code>@own</code> in a <code>for</code> loop to create an owned value for each iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/macros.jl#L24-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.MacrosModule.@move" href="#BorrowChecker.MacrosModule.@move"><code>BorrowChecker.MacrosModule.@move</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@move [:mut] new = old</code></pre><p>Transfer ownership from one variable to another, invalidating the old variable. If <code>:mut</code> is specified, the destination will be mutable. Otherwise, the destination will be immutable. For <code>isbits</code> types, this will automatically use <code>@clone</code> instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/macros.jl#L128-L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.MacrosModule.@clone" href="#BorrowChecker.MacrosModule.@clone"><code>BorrowChecker.MacrosModule.@clone</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@clone [:mut] new = old</code></pre><p>Create a deep copy of a value, without moving the source. If <code>:mut</code> is specified, the destination will be mutable. Otherwise, the destination will be immutable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/macros.jl#L313-L319">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.MacrosModule.@take" href="#BorrowChecker.MacrosModule.@take"><code>BorrowChecker.MacrosModule.@take</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@take var</code></pre><p>Returns the inner value and does a deepcopy. This does <em>not</em> mark the original as moved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/macros.jl#L177-L181">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.MacrosModule.@take!" href="#BorrowChecker.MacrosModule.@take!"><code>BorrowChecker.MacrosModule.@take!</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@take! var</code></pre><p>Take ownership of a value, typically used in function arguments. Returns the inner value and marks the original as moved. For <code>isbits</code> types, this will return a copy and not mark the original as moved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/macros.jl#L165-L171">source</a></section></article><h2 id="References-and-Lifetimes"><a class="docs-heading-anchor" href="#References-and-Lifetimes">References and Lifetimes</a><a id="References-and-Lifetimes-1"></a><a class="docs-heading-anchor-permalink" href="#References-and-Lifetimes" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.MacrosModule.@lifetime" href="#BorrowChecker.MacrosModule.@lifetime"><code>BorrowChecker.MacrosModule.@lifetime</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@lifetime a begin
    @ref ~a rx = x
    # use refs here
end</code></pre><p>Create a lifetime scope for references. References created with this lifetime are only valid within the block and are automatically cleaned up when the block exits.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/macros.jl#L192-L200">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.MacrosModule.@ref" href="#BorrowChecker.MacrosModule.@ref"><code>BorrowChecker.MacrosModule.@ref</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@ref ~lifetime [:mut] var = value
@ref ~lifetime [:mut] (var1, var2, ...) = (value1, value2, ...)
@ref ~lifetime [:mut] for var in iter
    # body
end</code></pre><p>Create a reference to an owned value within a lifetime scope. If <code>:mut</code> is specified, creates a mutable reference. Otherwise, creates an immutable reference. Returns a Borrowed{T} or BorrowedMut{T} that forwards access to the underlying value.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This will not detect aliasing in the iterator.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/macros.jl#L226-L240">source</a></section></article><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.AbstractOwned" href="#BorrowChecker.TypesModule.AbstractOwned"><code>BorrowChecker.TypesModule.AbstractOwned</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractOwned{T}</code></pre><p>Base type for all owned value types in the BorrowChecker system.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L20-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.AbstractBorrowed" href="#BorrowChecker.TypesModule.AbstractBorrowed"><code>BorrowChecker.TypesModule.AbstractBorrowed</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractBorrowed{T}</code></pre><p>Base type for all borrowed reference types in the BorrowChecker system.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.Owned" href="#BorrowChecker.TypesModule.Owned"><code>BorrowChecker.TypesModule.Owned</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Owned{T}</code></pre><p>An immutable owned value. Common operations:</p><ul><li>Create using <code>@own x = value</code></li><li>Access value using <code>@take!</code> (moves) or <code>@take</code> (copies)</li><li>Borrow using <code>@ref</code></li><li>Access fields/indices via <code>.field</code> or <code>[indices...]</code> (returns LazyAccessor)</li></ul><p>Once moved, the value cannot be accessed again.</p><p><strong>Internal fields (not part of public API):</strong></p><ul><li><code>value::T</code>: The contained value</li><li><code>moved::Bool</code>: Whether the value has been moved</li><li><code>immutable_borrows::Int</code>: Count of active immutable borrows</li><li><code>symbol::Symbol</code>: Variable name for error reporting</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L34-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.OwnedMut" href="#BorrowChecker.TypesModule.OwnedMut"><code>BorrowChecker.TypesModule.OwnedMut</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OwnedMut{T}</code></pre><p>A mutable owned value. Common operations:</p><ul><li>Create using <code>@own :mut x = value</code></li><li>Access value using <code>@take!</code> (moves) or <code>@take</code> (copies)</li><li>Modify by setproperty! or setindex!: <code>x.field = value</code> or <code>x[indices...] = value</code></li><li>Borrow using <code>@ref</code> or <code>@ref :mut</code></li><li>Access fields/indices via <code>.field</code> or <code>[indices...]</code> (returns LazyAccessor)</li></ul><p>Once moved, the value cannot be accessed again.</p><p><strong>Internal fields (not part of public API):</strong></p><ul><li><code>value::T</code>: The contained value</li><li><code>moved::Bool</code>: Whether the value has been moved</li><li><code>immutable_borrows::Int</code>: Count of active immutable borrows</li><li><code>mutable_borrows::Int</code>: Count of active mutable borrows</li><li><code>symbol::Symbol</code>: Variable name for error reporting</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L68-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.Borrowed" href="#BorrowChecker.TypesModule.Borrowed"><code>BorrowChecker.TypesModule.Borrowed</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Borrowed{T,O&lt;:AbstractOwned}</code></pre><p>An immutable reference to an owned value. Common operations:</p><ul><li>Create using <code>@ref lt x = value</code></li><li>Access value using <code>@take</code> (copies)</li><li>Access fields/indices via <code>.field</code> or <code>[indices...]</code> (returns LazyAccessor)</li></ul><p>Multiple immutable references can exist simultaneously. The reference is valid only within its lifetime scope.</p><p><strong>Internal fields (not part of public API):</strong></p><ul><li><code>value::T</code>: The referenced value</li><li><code>owner::O</code>: The original owned value</li><li><code>lifetime::Lifetime</code>: The scope in which this reference is valid</li><li><code>symbol::Symbol</code>: Variable name for error reporting</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L121-L138">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.BorrowedMut" href="#BorrowChecker.TypesModule.BorrowedMut"><code>BorrowChecker.TypesModule.BorrowedMut</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">BorrowedMut{T,O&lt;:OwnedMut}</code></pre><p>A mutable reference to an owned value. Common operations:</p><ul><li>Create using <code>@ref lt :mut x = value</code></li><li>Access value using <code>@take</code> (copies)</li><li>Access fields/indices via <code>.field</code> or <code>[indices...]</code> (returns LazyAccessor)</li></ul><p>Only one mutable reference can exist at a time, and no immutable references can exist simultaneously.</p><p><strong>Internal fields (not part of public API):</strong></p><ul><li><code>value::T</code>: The referenced value</li><li><code>owner::O</code>: The original owned value</li><li><code>lifetime::Lifetime</code>: The scope in which this reference is valid</li><li><code>symbol::Symbol</code>: Variable name for error reporting</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L172-L189">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.LazyAccessor" href="#BorrowChecker.TypesModule.LazyAccessor"><code>BorrowChecker.TypesModule.LazyAccessor</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LazyAccessor{T,P,S,O&lt;:Union{AbstractOwned,AbstractBorrowed}}</code></pre><p>A lazy accessor for properties or indices of owned or borrowed values. Maintains ownership semantics while allowing property/index access without copying or moving.</p><p>Created automatically when accessing properties or indices of owned/borrowed values:</p><pre><code class="language-julia hljs">@own x = (a=1, b=2)
x.a  # Returns a LazyAccessor</code></pre><p><strong>Internal fields (not part of public API):</strong></p><ul><li><code>parent::P</code>: The parent value being accessed</li><li><code>property::S</code>: The property/index being accessed</li><li><code>property_type::Type{T}</code>: Type of the accessed property/index</li><li><code>target::O</code>: The original owned/borrowed value</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L233-L252">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.OrBorrowed" href="#BorrowChecker.TypesModule.OrBorrowed"><code>BorrowChecker.TypesModule.OrBorrowed</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OrBorrowed{T}</code></pre><p>Type alias for accepting either a value of type <code>T</code> or a borrowed reference to it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L311-L315">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.TypesModule.OrBorrowedMut" href="#BorrowChecker.TypesModule.OrBorrowedMut"><code>BorrowChecker.TypesModule.OrBorrowedMut</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OrBorrowedMut{T}</code></pre><p>Type alias for accepting either a value of type <code>T</code> or a mutable borrowed reference to it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/types.jl#L318-L322">source</a></section></article><h2 id="Traits"><a class="docs-heading-anchor" href="#Traits">Traits</a><a id="Traits-1"></a><a class="docs-heading-anchor-permalink" href="#Traits" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.StaticTraitModule.is_static" href="#BorrowChecker.StaticTraitModule.is_static"><code>BorrowChecker.StaticTraitModule.is_static</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_static(x)</code></pre><p>This trait is used to determine if we can safely <code>@take!</code> a value without marking the original as moved.</p><p>This is somewhat analogous to the <code>Copy</code> trait in Rust, although because Julia immutables are truly immutable, we actually do not need to copy on these.</p><p>For the most part, this is equal to <code>isbits</code>, but it also includes things like <code>Symbol</code> and <code>Type{T}</code> (recursively), which are not <code>isbits</code>, but which are immutable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/static_trait.jl#L3-L17">source</a></section></article><h2 id="Errors"><a class="docs-heading-anchor" href="#Errors">Errors</a><a id="Errors-1"></a><a class="docs-heading-anchor-permalink" href="#Errors" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.ErrorsModule.BorrowError" href="#BorrowChecker.ErrorsModule.BorrowError"><code>BorrowChecker.ErrorsModule.BorrowError</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type BorrowError &lt;: Exception end</code></pre><p>Base type for all errors related to borrow checking rules.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/errors.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.ErrorsModule.MovedError" href="#BorrowChecker.ErrorsModule.MovedError"><code>BorrowChecker.ErrorsModule.MovedError</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MovedError &lt;: BorrowError</code></pre><p>Error thrown when attempting to use a value that has been moved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/errors.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.ErrorsModule.BorrowRuleError" href="#BorrowChecker.ErrorsModule.BorrowRuleError"><code>BorrowChecker.ErrorsModule.BorrowRuleError</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">BorrowRuleError &lt;: BorrowError</code></pre><p>Error thrown when attempting to violate borrow checking rules, such as having multiple mutable references.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/errors.jl#L28-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.ErrorsModule.SymbolMismatchError" href="#BorrowChecker.ErrorsModule.SymbolMismatchError"><code>BorrowChecker.ErrorsModule.SymbolMismatchError</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SymbolMismatchError &lt;: BorrowError</code></pre><p>Error thrown when attempting to reassign a variable without using proper ownership transfer mechanisms.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/errors.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.ErrorsModule.ExpiredError" href="#BorrowChecker.ErrorsModule.ExpiredError"><code>BorrowChecker.ErrorsModule.ExpiredError</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ExpiredError &lt;: BorrowError</code></pre><p>Error thrown when attempting to use a reference whose lifetime has expired.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/errors.jl#L19-L23">source</a></section></article><h2 id="Experimental-Features"><a class="docs-heading-anchor" href="#Experimental-Features">Experimental Features</a><a id="Experimental-Features-1"></a><a class="docs-heading-anchor-permalink" href="#Experimental-Features" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BorrowChecker.Experimental.@managed" href="#BorrowChecker.Experimental.@managed"><code>BorrowChecker.Experimental.@managed</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@managed f()</code></pre><p>Run code with automatic ownership transfer enabled. Any <code>Owned</code> or <code>OwnedMut</code> arguments passed to functions within the block will automatically have their ownership transferred using the equivalent of <code>@take!</code>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This is an experimental feature and may change or be removed in future versions.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/MilesCranmer/BorrowChecker.jl/blob/afe3118222109a76d84fc2e733d955220cbb4546/src/experimental.jl#L89-L98">source</a></section></article><h2 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h2><p>Normally, you should rely on <code>OrBorrowed</code> and <code>OrBorrowedMut</code> to work with borrowed values, or use <code>@take</code> and <code>@take!</code> to unwrap owned values. However, for convenience, it might be useful to define functions on <code>Owned</code> and <code>OwnedMut</code> types, if you are confident that your operation will not &quot;move&quot; the input or return a view of it.</p><p>Many functions in Base are already overloaded. But if you need to define your own, you can do so by using the <code>request_value</code> function and the <code>AllWrappers</code> type union.</p><h3 id="Core-Types"><a class="docs-heading-anchor" href="#Core-Types">Core Types</a><a id="Core-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Types" title="Permalink"></a></h3><ul><li><code>AllWrappers{T}</code>: A type union that includes all wrapper types (<code>Owned{T}</code>, <code>OwnedMut{T}</code>, <code>Borrowed{T}</code>, <code>BorrowedMut{T}</code>, and <code>LazyAccessor{T}</code>). This is used to write generic methods that work with any wrapped value.</li></ul><h3 id="Core-Functions"><a class="docs-heading-anchor" href="#Core-Functions">Core Functions</a><a id="Core-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Functions" title="Permalink"></a></h3><ul><li><code>request_value(x, Val(:read))</code>: Request read access to a wrapped value</li><li><code>request_value(x, Val(:write))</code>: Request write access to a wrapped value</li></ul><h3 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h3><p>Here&#39;s how common operations are overloaded:</p><ol><li>Binary operations (like <code>*</code>) that only need read access:</li></ol><pre><code class="language-julia hljs">function Base.:(*)(l::AllWrappers{&lt;:Number}, r::AllWrappers{&lt;:Number})
    return Base.:(*)(request_value(l, Val(:read)), request_value(r, Val(:read)))
end</code></pre><ol><li>Mutating operations (like <code>pop!</code>) that need write access:</li></ol><pre><code class="language-julia hljs">function Base.pop!(r::AllWrappers)
    return Base.pop!(request_value(r, Val(:write)))
end</code></pre><p>The <code>request_value</code> function performs safety checks before allowing access:</p><ul><li>For read access: Verifies the value hasn&#39;t been moved</li><li>For write access: Verifies the value is mutable and not borrowed</li></ul><p>Note that for operations that need write access, and return a view of the input, it is wise to modify the standard output to return <code>nothing</code> instead, which is what we do for <code>push!</code>:</p><pre><code class="language-julia hljs">function Base.push!(r::AllWrappers, items...)
    Base.push!(request_value(r, Val(:write)), items...)
    return nothing
end</code></pre><p>While this violates the expected return type, it is a necessary evil for safety. The <code>nothing</code> return will cause loud errors if you have code that relies on this design. This is good! Loud bugs are collaborators; silent bugs are saboteurs.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Monday 20 January 2025 23:17">Monday 20 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
